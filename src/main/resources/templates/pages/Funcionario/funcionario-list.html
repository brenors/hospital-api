<!DOCTYPE html>
<html lang="pt-br" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins&display=swap');
        *{
            padding: 0; margin: 0;
            font-family: 'Poppins', sans-serif;
        }
  
        .material-symbols-outlined {
            user-select: none;
            font-variation-settings:
            'FILL' 0,
            'wght' 600,
            'GRAD' 0,
            'opsz' 48
        }
  
        header {
            display: flex; flex-direction: row;
            justify-content: space-between;
            padding: 10px;
        }
  
        /* LIST */
        .top {
            display: flex; flex-direction: row;
            justify-content: space-around;
            padding: 20px;
        }
  
        h1, h2 {
            text-align: center;
            font-size: 20px;
        }
  
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
          }
          
          th,
          td {
            padding: 10px;
            text-align: left;
            border: 1px solid #ccc;
          }
          
          @media screen and (max-width: 600px) {
            table {
              overflow-x: auto;
              display: block;
            }
          
            th,
            td {
              white-space: nowrap;
            }
          }
  
        /* EDIT */
        .edit-form {
          display: flex; flex-direction: column; height: 80vh; 
          justify-content: center; align-items: center;
        }
  
        .row {
          display: flex; flex-direction: row;
          gap: 20%;
        }
      </style>
    <title>Funcionários | HospitalAPI</title>
</head>
<body>
    <header>
        <span class="material-symbols-outlined">medication</span>
        <a th:href="@{/index}">Voltar ao menu principal</a>
    </header>

    <main>
        <div class="top">
            <h1>Funcionários</h1>
            <a href="/funcionariocadastro">Cadastrar um novo funcionário</a>
        </div>
        <h2>Funcionários ativos</h2>
        <table>
            <thead>
              <tr>
                <th>Nome</th>
                <th>Cargo</th>
                <th>Salário</th>
                <th>Carga Horária</th>
                <th>CTPS</th>
              </tr>
            </thead>
            <tbody>
              <tr data-th-each="funcionario : ${listafuncionarios}">
                <td data-th-text="${funcionario.nome}">...</td>
                <td data-th-text="${funcionario.cargo}">...</td>
                <td data-th-text="${funcionario.salario}">...</td>
                <td data-th-text="${funcionario.cargaHoraria}">...</td>
                <td data-th-text="${funcionario.CTPS}">...</td>
                <td><a href="">Editar</a></td>
                <td><a href="">Apagar</a></td>
              </tr>
            </tbody>
          </table>
    </main>

    <script>
        function carregarFuncionarios() {
            fetch('/funcionarios')
                .then(response => response.json())
                .then(funcionarios => {
                    const tableBody = document.getElementById('funcionariosTable').getElementsByTagName('tbody')[0];
                    tableBody.innerHTML = '';

                    funcionarios.forEach(funcionario => {
                        const row = tableBody.insertRow();
                        row.innerHTML = `
                            <td>${funcionario.nome}</td>
                            <td>${funcionario.cargo}</td>
                            <td>${funcionario.salario}</td>
                            <td>${funcionario.cargaHoraria}</td>
                            <td>${funcionario.ctps}</td>
                            <td><a href="">Editar</a></td>
                            <td><a href="">Apagar</a></td>
                        `;
                    });
                })
                .catch(error => console.error('Erro ao carregar funcionários:', error));
        }

        document.addEventListener('DOMContentLoaded', carregarFuncionarios);
    </script>
</body>
</html>